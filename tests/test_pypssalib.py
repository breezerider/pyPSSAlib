import pypssalib as m


def test_version():
    assert m.__version__ == "0.0.0"


def test_run_testcase(monkeypatch):
    monkeypatch.setenv("GSL_RNG_SEED", "01062024")
    expected = [
        14,
        8,
        7,
        6,
        11,
        9,
        9,
        11,
        10,
        9,
        15,
        13,
        7,
        9,
        12,
        11,
        13,
        10,
        11,
        16,
        13,
        11,
        9,
        12,
        12,
        14,
        12,
        10,
        17,
        15,
        8,
        13,
        11,
        12,
        14,
        14,
        8,
        10,
        11,
        8,
        10,
        12,
        10,
        10,
        7,
        12,
        13,
        10,
        12,
        14,
        12,
        10,
        14,
        11,
        10,
        12,
        10,
        17,
        9,
        4,
        8,
        8,
        16,
        15,
        15,
        12,
        15,
        10,
        12,
        20,
        11,
        15,
        10,
        5,
        8,
        8,
        6,
        5,
        9,
        10,
        8,
        8,
        12,
        6,
        5,
        11,
        12,
        9,
        8,
        11,
        9,
        4,
        7,
        4,
        10,
        9,
        11,
        8,
        10,
        14,
        12,
    ]

    pssa = m.pSSAlib()
    actual = pssa.run_testcase(m.Testcase.sbd, [1, 1, 10, 0], 2000, 2100.0, 1)
    assert (expected == actual).all()
